{"remainingRequest":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/karl/Repos/dmtc-userinterface/ui/src/components/logintest.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/karl/Repos/dmtc-userinterface/ui/src/components/logintest.vue","mtime":1626389458532},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgeyBGb3JtLCBGaWVsZCwgRXJyb3JNZXNzYWdlIH0gZnJvbSAidmVlLXZhbGlkYXRlIjsKCWltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOwoJaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwoKCWV4cG9ydCBkZWZhdWx0IHsKCQluYW1lOiAiTG9naW4iLAoJCQoJCWNvbXBvbmVudHM6IHsKCQkJRm9ybSwKCQkJRmllbGQsCgkJCUVycm9yTWVzc2FnZSwKCQl9LAoJCQoJCWRhdGEoKSB7CgkJCWNvbnN0IHNjaGVtYSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7CgkJCQl1c2VybmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCJVc2VybmFtZSBpcyByZXF1aXJlZCEiKSwKCQkJCXBhc3N3b3JkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoIlBhc3N3b3JkIGlzIHJlcXVpcmVkISIpLAoJCQl9KTsKCQoJCQlyZXR1cm4gewoJCQkJbG9hZGluZzogZmFsc2UsCgkJCQltZXNzYWdlOiAiIiwKCQkJCXNjaGVtYSwKCQkJfTsKCQl9LAoKCQljb21wdXRlZDogewoJCQkuLi5tYXBHZXR0ZXJzKFsKCQkJCSdsb2dnZWRpbicsCgkJCQkndXNlcm5hbWUnLAoJCQkJJ2dyb3VwcycKCQkJXSkKCQl9LAoJCQoJCW1ldGhvZHM6IHsKCQkJaGFuZGxlTG9naW4odXNlcikgewoJCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCQkJCWNvbnNvbGUubG9nKCJ1c2VybmFtZTogIiArIHVzZXIudXNlcm5hbWUpCgkJCQkvL2NvbnNvbGUubG9nKHVzZXIpOwoJCQkJdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvZ2luIiwgdXNlcikudGhlbigKCQkJCQkoKSA9PiB7CgkJCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRHcm91cHMiKS50aGVuKAoJCQkJCQkJKCkgPT4gewoJCQkJCQkJCWNvbnNvbGUubG9nKCJnZXR0aW5nIHRoZSB1c2VyJ3MgZ3JvdXBzIikKCQkJCQkJCX0KCQkJCQkJKTsKCQkJCQkJY29uc29sZS5sb2coImxvZ2luIGRpZCBub3QgdGhyb3cgYW4gZXJyb3IiKQoJCQkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCQkJCQkJLy90aGlzLiRyb3V0ZXIucHVzaCgiL3Byb2ZpbGUiKTsKCQkJCQl9LAoJCQkJCShlcnJvcikgPT4gewoJCQkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZTsKCQkJCQkJdGhpcy5tZXNzYWdlID0KCQkJCQkJCShlcnJvci5yZXNwb25zZSAmJgoJCQkJCQkJZXJyb3IucmVzcG9uc2UuZGF0YSAmJgoJCQkJCQkJZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKSB8fAoJCQkJCQkJZXJyb3IubWVzc2FnZSB8fAoJCQkJCQkJZXJyb3IudG9TdHJpbmcoKTsKCQkJCQl9CgkJCQkpOwoJCQkJCgkJCX0sCgkJCWhhbmRsZUxvZ291dCgpIHsKCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCJsb2dvdXQiKQoJCQl9CgkJfSwKCX07Cg=="},{"version":3,"sources":["/Users/karl/Repos/dmtc-userinterface/ui/src/components/logintest.vue"],"names":[],"mappings":"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","file":"/Users/karl/Repos/dmtc-userinterface/ui/src/components/logintest.vue","sourceRoot":"","sourcesContent":["<template>\n<div class=\"col-md-12\">\n\t<span v-if=\"loggedin\">\n\t\t<p>You are logged in as: {{ username }}</p>\n\t\t<p>You are a member of the following DMTC groups:</p>\n\t\t<ul>\n\t\t\t<li v-for=\"(group,index) in groups\" :key=\"index\">{{ group }} </li>\n\t\t</ul>\n\t\t<Form @submit=\"handleLogout\">\n\t\t\t<div class=\"form-group\">\n\t\t\t\t<button class=\"btn btn-primary btn-block\">\n\t\t\t\t<span>Logout</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Form>\n\t</span>\n\t<span v-else>\n\t\t<div class=\"card card-container\">\n\t\t\t<Form @submit=\"handleLogin\" :validation-schema=\"schema\">\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"username\">Username</label>\n\t\t\t\t\t<Field name=\"username\" type=\"text\" class=\"form-control\" />\n\t\t\t\t\t<ErrorMessage name=\"username\" class=\"error-feedback\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label for=\"password\">Password</label>\n\t\t\t\t\t<Field name=\"password\" type=\"password\" class=\"form-control\" />\n\t\t\t\t\t<ErrorMessage name=\"password\" class=\"error-feedback\" />\n\t\t\t\t</div>\t\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<button class=\"btn btn-primary btn-block\" :disabled=\"loading\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-show=\"loading\"\n\t\t\t\t\t\tclass=\"spinner-border spinner-border-sm\"\n\t\t\t\t\t></span>\n\t\t\t\t\t<span>Login</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<div v-if=\"message\" class=\"alert alert-danger\" role=\"alert\">\n\t\t\t\t\t\t{{ message }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Form>\n\t\t</div>\n\t</span>\n</div>\n</template>\n\t\n<script>\n\timport { Form, Field, ErrorMessage } from \"vee-validate\";\n\timport * as yup from \"yup\";\n\timport { mapGetters } from 'vuex';\n\n\texport default {\n\t\tname: \"Login\",\n\t\t\n\t\tcomponents: {\n\t\t\tForm,\n\t\t\tField,\n\t\t\tErrorMessage,\n\t\t},\n\t\t\n\t\tdata() {\n\t\t\tconst schema = yup.object().shape({\n\t\t\t\tusername: yup.string().required(\"Username is required!\"),\n\t\t\t\tpassword: yup.string().required(\"Password is required!\"),\n\t\t\t});\n\t\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tmessage: \"\",\n\t\t\t\tschema,\n\t\t\t};\n\t\t},\n\n\t\tcomputed: {\n\t\t\t...mapGetters([\n\t\t\t\t'loggedin',\n\t\t\t\t'username',\n\t\t\t\t'groups'\n\t\t\t])\n\t\t},\n\t\t\n\t\tmethods: {\n\t\t\thandleLogin(user) {\n\t\t\t\tthis.loading = true;\n\t\t\t\tconsole.log(\"username: \" + user.username)\n\t\t\t\t//console.log(user);\n\t\t\t\tthis.$store.dispatch(\"login\", user).then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.$store.dispatch(\"getGroups\").then(\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tconsole.log(\"getting the user's groups\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconsole.log(\"login did not throw an error\")\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\t//this.$router.push(\"/profile\");\n\t\t\t\t\t},\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.message =\n\t\t\t\t\t\t\t(error.response &&\n\t\t\t\t\t\t\terror.response.data &&\n\t\t\t\t\t\t\terror.response.data.message) ||\n\t\t\t\t\t\t\terror.message ||\n\t\t\t\t\t\t\terror.toString();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\t\n\t\t\t},\n\t\t\thandleLogout() {\n\t\t\t\tthis.$store.dispatch(\"logout\")\n\t\t\t}\n\t\t},\n\t};\n</script>\n\t\n<style scoped>\n</style>\n\t"]}]}
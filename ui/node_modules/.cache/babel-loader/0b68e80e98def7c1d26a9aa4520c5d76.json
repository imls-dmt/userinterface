{"remainingRequest":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/thread-loader/dist/cjs.js!/Users/karl/Repos/dmtc-userinterface/ui/node_modules/babel-loader/lib/index.js!/Users/karl/Repos/dmtc-userinterface/ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/karl/Repos/dmtc-userinterface/ui/src/store/auth.module.js","dependencies":[{"path":"/Users/karl/Repos/dmtc-userinterface/ui/src/store/auth.module.js","mtime":1625802939403},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEF1dGhTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2VzL2F1dGguc2VydmljZSc7CmltcG9ydCBVc2VyU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2UnOyAvL2NvbnN0IGxvZ2luUmVzdWx0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5SZXN1bHQnKSk7Ci8vY29uc3QgaW5pdGlhbFN0YXRlID0gbG9naW5SZXN1bHQuc3RhdHVzID09ICJzdWNjZXNzIgovLwk/IHsgc3RhdHVzOiB7IGxvZ2dlZEluOiB0cnVlIH0gfQovLwk6IHsgc3RhdHVzOiB7IGxvZ2dlZEluOiBmYWxzZSB9IH07Cgpjb25zdCBpbml0aWFsU3RhdGUgPSB7CiAgdXNlcjogewogICAgbG9nZ2VkSW46IGZhbHNlLAogICAgdXNlcm5hbWU6ICIiCiAgfSwKICBncm91cHM6IFtdCn07CmV4cG9ydCBjb25zdCBhdXRoID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IGluaXRpYWxTdGF0ZSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbih7CiAgICAgIGNvbW1pdAogICAgfSwgdXNlcikgewogICAgICByZXR1cm4gQXV0aFNlcnZpY2UubG9naW4odXNlcikudGhlbihyZXN1bHQgPT4gewogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09ICJzdWNjZXNzIikgewogICAgICAgICAgY29tbWl0KCdsb2dpblN1Y2Nlc3MnKTsKICAgICAgICAgIGNvbW1pdCgnc2V0VXNlcm5hbWUnLCB1c2VyLnVzZXJuYW1lKTsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodXNlcik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbW1pdCgnbG9naW5GYWlsdXJlJyk7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVzZXIpOwogICAgICAgIH0KICAgICAgfSwgZXJyb3IgPT4gewogICAgICAgIGNvbW1pdCgnbG9naW5GYWlsdXJlJyk7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9LAoKICAgIGxvZ291dCh7CiAgICAgIGNvbW1pdAogICAgfSkgewogICAgICBBdXRoU2VydmljZS5sb2dvdXQoKTsKICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgIH0sCgogICAgZ2V0R3JvdXBzKHsKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIHJldHVybiBVc2VyU2VydmljZS5nZXRHcm91cHMoKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICBjb21taXQoJ3NldEdyb3VwcycsIHJlc3VsdCk7CiAgICAgIH0pOwogICAgfQoKICB9LAogIG11dGF0aW9uczogewogICAgbG9naW5TdWNjZXNzKHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXIubG9nZ2VkSW4gPSB0cnVlOwogICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7CiAgICB9LAoKICAgIGxvZ2luRmFpbHVyZShzdGF0ZSkgewogICAgICBzdGF0ZS51c2VyLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXIudXNlcm5hbWUgPSBudWxsOwogICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7CiAgICB9LAoKICAgIGxvZ291dChzdGF0ZSkgewogICAgICBzdGF0ZS51c2VyLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgIHN0YXRlLnVzZXIudXNlcm5hbWUgPSBudWxsOwogICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7CiAgICB9LAoKICAgIHNldFVzZXJuYW1lKHN0YXRlLCB1c2VybmFtZSkgewogICAgICBzdGF0ZS51c2VyLnVzZXJuYW1lID0gdXNlcm5hbWU7CiAgICAgIGNvbnNvbGUubG9nKHN0YXRlKTsKICAgIH0sCgogICAgc2V0R3JvdXBzKHN0YXRlLCBncm91cHMpIHsKICAgICAgc3RhdGUuZ3JvdXBzID0gZ3JvdXBzOwogICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7CiAgICB9CgogIH0KfTs="},{"version":3,"sources":["/Users/karl/Repos/dmtc-userinterface/ui/src/store/auth.module.js"],"names":["AuthService","UserService","initialState","user","loggedIn","username","groups","auth","namespaced","state","actions","login","commit","then","result","status","Promise","resolve","error","reject","logout","getGroups","console","log","mutations","loginSuccess","loginFailure","setUsername","setGroups"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,0BAAxB;AACA,OAAOC,WAAP,MAAwB,0BAAxB,C,CAEA;AACA;AACA;AACA;;AAEA,MAAMC,YAAY,GAAG;AACpBC,EAAAA,IAAI,EAAE;AACLC,IAAAA,QAAQ,EAAE,KADL;AAELC,IAAAA,QAAQ,EAAE;AAFL,GADc;AAKpBC,EAAAA,MAAM,EAAE;AALY,CAArB;AAQA,OAAO,MAAMC,IAAI,GAAG;AACnBC,EAAAA,UAAU,EAAE,IADO;AAEnBC,EAAAA,KAAK,EAAEP,YAFY;AAGnBQ,EAAAA,OAAO,EAAE;AACRC,IAAAA,KAAK,CAAC;AAAEC,MAAAA;AAAF,KAAD,EAAaT,IAAb,EAAmB;AACvB,aAAOH,WAAW,CAACW,KAAZ,CAAkBR,IAAlB,EAAwBU,IAAxB,CACNC,MAAM,IAAI;AACT,YAAIA,MAAM,CAACC,MAAP,IAAiB,SAArB,EAAgC;AAC/BH,UAAAA,MAAM,CAAC,cAAD,CAAN;AACAA,UAAAA,MAAM,CAAC,aAAD,EAAgBT,IAAI,CAACE,QAArB,CAAN;AACA,iBAAOW,OAAO,CAACC,OAAR,CAAgBd,IAAhB,CAAP;AACA,SAJD,MAIO;AACNS,UAAAA,MAAM,CAAC,cAAD,CAAN;AACA,iBAAOI,OAAO,CAACC,OAAR,CAAgBd,IAAhB,CAAP;AACA;AACD,OAVK,EAWNe,KAAK,IAAI;AACRN,QAAAA,MAAM,CAAC,cAAD,CAAN;AACA,eAAOI,OAAO,CAACG,MAAR,CAAeD,KAAf,CAAP;AACA,OAdK,CAAP;AAgBA,KAlBO;;AAmBRE,IAAAA,MAAM,CAAC;AAAER,MAAAA;AAAF,KAAD,EAAa;AAClBZ,MAAAA,WAAW,CAACoB,MAAZ;AACAR,MAAAA,MAAM,CAAC,QAAD,CAAN;AACA,KAtBO;;AAuBRS,IAAAA,SAAS,CAAC;AAAET,MAAAA;AAAF,KAAD,EAAa;AACrB,aAAOX,WAAW,CAACoB,SAAZ,GAAwBR,IAAxB,CACNC,MAAM,IAAI;AACTQ,QAAAA,OAAO,CAACC,GAAR,CAAYT,MAAZ;AACAF,QAAAA,MAAM,CAAC,WAAD,EAAcE,MAAd,CAAN;AACA,OAJK,CAAP;AAMA;;AA9BO,GAHU;AAmCnBU,EAAAA,SAAS,EAAE;AACVC,IAAAA,YAAY,CAAChB,KAAD,EAAQ;AACnBA,MAAAA,KAAK,CAACN,IAAN,CAAWC,QAAX,GAAsB,IAAtB;AACAkB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA,KAJS;;AAKViB,IAAAA,YAAY,CAACjB,KAAD,EAAQ;AACnBA,MAAAA,KAAK,CAACN,IAAN,CAAWC,QAAX,GAAsB,KAAtB;AACAK,MAAAA,KAAK,CAACN,IAAN,CAAWE,QAAX,GAAsB,IAAtB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA,KATS;;AAUVW,IAAAA,MAAM,CAACX,KAAD,EAAQ;AACbA,MAAAA,KAAK,CAACN,IAAN,CAAWC,QAAX,GAAsB,KAAtB;AACAK,MAAAA,KAAK,CAACN,IAAN,CAAWE,QAAX,GAAsB,IAAtB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA,KAdS;;AAeVkB,IAAAA,WAAW,CAAClB,KAAD,EAAQJ,QAAR,EAAkB;AAC5BI,MAAAA,KAAK,CAACN,IAAN,CAAWE,QAAX,GAAsBA,QAAtB;AACAiB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA,KAlBS;;AAmBVmB,IAAAA,SAAS,CAAEnB,KAAF,EAASH,MAAT,EAAiB;AACzBG,MAAAA,KAAK,CAACH,MAAN,GAAeA,MAAf;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA;;AAtBS;AAnCQ,CAAb","sourcesContent":["import AuthService from '../services/auth.service';\nimport UserService from '../services/user.service';\n\n//const loginResult = JSON.parse(localStorage.getItem('loginResult'));\n//const initialState = loginResult.status == \"success\"\n//\t? { status: { loggedIn: true } }\n//\t: { status: { loggedIn: false } };\n\nconst initialState = {\n\tuser: {\n\t\tloggedIn: false,\n\t\tusername: \"\",\n\t},\n\tgroups: [],\t\n}\n\nexport const auth = {\n\tnamespaced: true,\n\tstate: initialState,\n\tactions: {\n\t\tlogin({ commit }, user) {\n\t\t\treturn AuthService.login(user).then(\n\t\t\t\tresult => {\n\t\t\t\t\tif (result.status == \"success\") {\n\t\t\t\t\t\tcommit('loginSuccess');\n\t\t\t\t\t\tcommit('setUsername', user.username);\n\t\t\t\t\t\treturn Promise.resolve(user);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcommit('loginFailure');\n\t\t\t\t\t\treturn Promise.resolve(user);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror => {\n\t\t\t\t\tcommit('loginFailure');\n\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tlogout({ commit }) {\n\t\t\tAuthService.logout();\n\t\t\tcommit('logout');\n\t\t},\n\t\tgetGroups({ commit }) {\n\t\t\treturn UserService.getGroups().then(\n\t\t\t\tresult => {\n\t\t\t\t\tconsole.log(result);\n\t\t\t\t\tcommit('setGroups', result);\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t},\n\tmutations: {\n\t\tloginSuccess(state) {\n\t\t\tstate.user.loggedIn = true;\n\t\t\tconsole.log(state);\n\t\t},\n\t\tloginFailure(state) {\n\t\t\tstate.user.loggedIn = false;\n\t\t\tstate.user.username = null;\n\t\t\tconsole.log(state)\n\t\t},\n\t\tlogout(state) {\n\t\t\tstate.user.loggedIn = false;\n\t\t\tstate.user.username = null;\n\t\t\tconsole.log(state)\n\t\t},\n\t\tsetUsername(state, username) {\n\t\t\tstate.user.username = username;\n\t\t\tconsole.log(state)\n\t\t},\n\t\tsetGroups (state, groups) {\n\t\t\tstate.groups = groups;\n\t\t\tconsole.log(state)\n\t\t}\n\t}\n};\n"]}]}
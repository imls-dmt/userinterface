{"remainingRequest":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/babel-loader/lib/index.js!/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/karl/Repos/dmtc-userinterface/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/karl/Repos/dmtc-userinterface/ui/src/components/Search.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/karl/Repos/dmtc-userinterface/ui/src/components/Search.vue","mtime":1622660830143},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/karl/Repos/dmtc-userinterface/ui/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEZpbHRlckl0ZW0gZnJvbSAiLi9GaWx0ZXJJdGVtLnZ1ZSI7CmltcG9ydCBSZXN1bHRJdGVtIGZyb20gIi4vUmVzdWx0SXRlbS52dWUiOwppbXBvcnQgU2VhcmNoQmFyIGZyb20gIi4vU2VhcmNoQmFyLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VhcmNoIiwKICBlcnJvcjogIiIsCiAgY29tcG9uZW50czogewogICAgRmlsdGVySXRlbSwKICAgIFJlc3VsdEl0ZW0sCiAgICBTZWFyY2hCYXIKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6IGZhbHNlLAogICAgICBjdXJyZW50X3BhZ2U6IDEsCiAgICAgIGZhY2V0X25hbWVzOiB7CiAgICAgICAga2V5d29yZHM6IFsiS2V5d29yZHMiLCAic2hvdyJdLAogICAgICAgICJhdXRob3Jfb3JnLm5hbWUiOiBbIkF1dGhvciBPcmdhbml6YXRpb24ocykiLCAic2hvdyJdLAogICAgICAgIC8vIGhhcyBidWcgc2hvd2luZyBpbmNvcnJlY3QgdmFsdWVzIGNvcnJlc3BvbmRpbmcgd2l0aCBvcmcgbmFtZQogICAgICAgIGF1dGhvcl9uYW1lczogWyJBdXRob3JpbmcgUGVyc29uKHMpIE5hbWVzIiwgInNob3ciXSwKICAgICAgICAvLyBxdWVzdGlvbiBvZiB3aGV0aGVyIHRoaXMgc2hvdWxkIGJlIGhpZGRlbgogICAgICAgIGxhbmd1YWdlX3ByaW1hcnk6IFsiT3JpZ2luYWwgTGFuZ3VhZ2VzIiwgInNob3ciXSwKICAgICAgICBsYW5ndWFnZXNfc2Vjb25kYXJ5OiBbIkFkZGl0aW9uYWwgTGFuZ3VhZ2VzIiwgInNob3ciXSwKICAgICAgICB0YXJnZXRfYXVkaWVuY2U6IFsiVGFyZ2V0IEF1ZGllbmNlcyIsICJzaG93Il0sCiAgICAgICAgYWNjZXNzX2Nvc3Q6IFsiQWNjZXNzIENvc3QiLCAic2hvdyJdLAogICAgICAgIGxpY2Vuc2U6IFsiTGljZW5zZSIsICJzaG93Il0sCiAgICAgICAgImFjY2Vzc2liaWxpdHlfZmVhdHVyZXMubmFtZSI6IFsiQWNjZXNzaWJpbGl0eSBGZWF0dXJlcyIsICJzaG93Il0sCiAgICAgICAgc3ViamVjdDogWyJTdWJqZWN0IERpc2NpcGxpbmUiLCAic2hvdyJdLAogICAgICAgIG1lZGlhX3R5cGU6IFsiTWVkaWEgVHlwZSIsICJzaG93Il0sCiAgICAgICAgbHJfdHlwZTogWyJMZWFybmluZyBSZXNvdXJjZSBUeXBlIiwgInNob3ciXSwKICAgICAgICBwdXJwb3NlOiBbIkVkdWNhdGlvbmFsIFB1cnBvc2UiLCAic2hvdyJdLAogICAgICAgICJlZF9mcmFtZXdvcmtzLm5hbWUiOiBbIkVkdWNhdGlvbmFsIEZyYW1ld29ya3MiLCAic2hvdyJdIC8vIHVuY29tbWVudCB0aGlzIGxpbmUgd2hlbiBlZF9mcmFtZXdvcmtzIGtleSBpc3N1ZSBpcyByZXNvbHZlZCBpbiBBUEkKCiAgICAgIH0sCiAgICAgIGZpbHRlcnM6IFtdLAogICAgICBmaWx0ZXJzX3NlbGVjdGVkOiB7fSwKICAgICAgaXRlbXNfcGVyX3BhZ2U6IDEwLAogICAgICBub19uZXh0OiBmYWxzZSwKICAgICAgbm9fcHJldjogdHJ1ZSwKICAgICAgbnVtX3BhZ2VzOiAwLAogICAgICBvZmZzZXQ6IDAsCiAgICAgIHF1aWNrX3NlYXJjaF9zdHJpbmc6ICIiLAogICAgICBzZWFyY2hfcmVzdWx0OiBbXSwKICAgICAgc29ydF9zdHI6ICJzY29yZSBkZXNjIiwKICAgICAgc3RhcnRfaW5kZXg6IDEsCiAgICAgIGlzX2Z1bGw6IGZhbHNlCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGNoYW5nZUl0ZW1zUGVyUGFnZSgpIHsKICAgICAgLy8gY29uc29sZS5sb2coImNoYW5nZUl0ZW1zUGVyUGFnZTogIiwgdGhpcy5pdGVtc19wZXJfcGFnZSk7CiAgICAgIC8vIGl0ZW1zX3Blcl9wYWdlIGJlY29tZXMgYSBzdHJpbmcgYWZ0ZXIgdXNlciBjaGFuZ2UgdGhlIHZhbHVlIHNvCiAgICAgIC8vIG5lZWQgdG8gZm9yY2UgaXQgYmFjayB0byBpbnQgaGVyZQogICAgICB0aGlzLml0ZW1zX3Blcl9wYWdlID0gcGFyc2VJbnQodGhpcy5pdGVtc19wZXJfcGFnZSk7IC8vIGNvbnNvbGUubG9nKCJpdGVtc19wZXJfcGFnZSAyID0gIiwgdGhpcy5pdGVtc19wZXJfcGFnZSk7CgogICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHMoKTsKICAgIH0sCgogICAgZG9DbGVhcigpIHsKICAgICAgdGhpcy5xdWlja19zZWFyY2hfc3RyaW5nID0gIiI7CiAgICAgIHRoaXMuZmlsdGVyc19zZWxlY3RlZCA9IHt9OwogICAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHMoKTsKICAgIH0sCgogICAgZmlsdGVyVXBkYXRlZChkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJmaWx0ZXJVcGRhdGVkISIsIGRhdGEpOwogICAgICAvLyBjb25zb2xlLmxvZygiZGF0YSBrZXkgPSAiLCBkYXRhLmtleSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJkYXRhIG9wdGlvbnMgPSAiLCBkYXRhLnNlbGVjdGVkX29wdGlvbnMpOwogICAgICAvLyB0aGlzLmZpbHRlcnNfc2VsZWN0ZWQgPSB7fTsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAvLyBjb25zb2xlLmxvZygiZGF0YSA6ICIsIGRhdGEpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCJmaWx0ZXJzX3NlbGVjdGVkIDEgOiAiLCB0aGlzLmZpbHRlcnNfc2VsZWN0ZWQpOwogICAgICAgIHRoaXMuZmlsdGVyc19zZWxlY3RlZFtkYXRhLmtleV0gPSBkYXRhLnNlbGVjdGVkX29wdGlvbnM7IC8vIGNvbnNvbGUubG9nKCJmaWx0ZXJzX3NlbGVjdGVkIDIgOiAiLCB0aGlzLmZpbHRlcnNfc2VsZWN0ZWQpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb24oMSwgMCk7CiAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0cygpOwogICAgfSwKCiAgICBnZXRTZWFyY2hSZXN1bHRzKCkgewogICAgICAvL2NvbnNvbGUubG9nKCJlbnRlcmVkIGdldFNlYXJjaFJlc3VsdHMoKSIpOwogICAgICAvLyBjb25zb2xlLmxvZygicXVpY2tfc2VhcmNoX3N0cmluZyA9ICIsIHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZyk7CiAgICAgIHRoaXMuZXJyb3IgPSBmYWxzZTsKICAgICAgbGV0IGJvZHkgPSB0aGlzLnNldHVwUG9zdENvbnRlbnQoKTsKICAgICAgdGhpcy4kY3VycmVudFNlYXJjaCA9IGJvZHk7CiAgICAgIHRoaXMuJHNlYXJjaEhpc3RvcnkudW5zaGlmdChib2R5KTsgLy9jb25zb2xlLmxvZygiYm9keTogIiwgYm9keSk7CiAgICAgIC8vY29uc29sZS5sb2coImN1cnJlbnRTZWFyY2g6ICIsIHRoaXMuJGN1cnJlbnRTZWFyY2gpOwogICAgICAvL2NvbnNvbGUubG9nKCJzZWFyY2hIaXN0b3J5OiAiLCB0aGlzLiRzZWFyY2hIaXN0b3J5KTsKCiAgICAgIGZldGNoKCJodHRwczovL2VzaXAtZGV2LTAyLmVkYWNubS5vcmcvYXBpL3Jlc291cmNlcy8iLCB7CiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkKICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAvLyBETyBOT1QgZG8gYW55dGhpbmcgdG8gdGhlIHJlc3BvbnNlLCBpbmNsdWRpbmcgY29uc29sZS5sb2cKICAgICAgICAgIC8vIG9yIGVsc2UgaXQgd2lsbCBjYXVzZSBhbiBlcnJvciB0aGF0IHJlc3BvbnNlIGlzICJkaXN0dXJiZWQiCiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTsKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOyAvLyBjb25zb2xlLmxvZygicmVzdWx0IDoiLCByZXN1bHQpOwoKICAgICAgICB0aGlzLnNlYXJjaF9yZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gdGhpcy5zZXR1cEZpbHRlcnMocmVzdWx0LmZhY2V0cyk7IC8vIGNvbnNvbGUubG9nKCJzZWFyY2hfcmVzdWx0IDoiLCB0aGlzLnNlYXJjaF9yZXN1bHQpOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKCiAgICBnb3RvUGFnZShwYWdlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJwYWdlID0gIiwgcGFnZSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJoaXRzIHRvdGFsID0gIiwgdGhpcy5zZWFyY2hfcmVzdWx0WyJoaXRzLXRvdGFsIl0pOwogICAgICAvLyBjb25zb2xlLmxvZygib2Zmc2V0ID0gIiwgdGhpcy5vZmZzZXQpOwogICAgICAvLyBjb25zb2xlLmxvZygiaXRlbXNfcGVyX3BhZ2UgPSAiLCBwYXJzZUludCh0aGlzLml0ZW1zX3Blcl9wYWdlKSk7CiAgICAgIGxldCBvZmZzZXQgPSAwLAogICAgICAgICAgc3RhcnQgPSAxOwoKICAgICAgaWYgKHBhZ2UgPT0gImZpcnN0IikgewogICAgICAgIG9mZnNldCA9IDA7CiAgICAgICAgc3RhcnQgPSAxOwogICAgICB9IGVsc2UgaWYgKHBhZ2UgPT0gIm5leHQiKSB7CiAgICAgICAgb2Zmc2V0ID0gdGhpcy5vZmZzZXQgKyB0aGlzLml0ZW1zX3Blcl9wYWdlOwogICAgICAgIHN0YXJ0ID0gdGhpcy5zdGFydF9pbmRleCArIHRoaXMuaXRlbXNfcGVyX3BhZ2U7CiAgICAgIH0gZWxzZSBpZiAocGFnZSA9PSAicHJldiIpIHsKICAgICAgICBvZmZzZXQgPSB0aGlzLm9mZnNldCAtIHRoaXMuaXRlbXNfcGVyX3BhZ2U7CiAgICAgICAgc3RhcnQgPSB0aGlzLnN0YXJ0X2luZGV4IC0gdGhpcy5pdGVtc19wZXJfcGFnZTsKICAgICAgfSBlbHNlIGlmIChwYWdlID09ICJsYXN0IikgewogICAgICAgIG9mZnNldCA9IHRoaXMuc2VhcmNoX3Jlc3VsdFsiaGl0cy10b3RhbCJdIC0gdGhpcy5pdGVtc19wZXJfcGFnZTsKICAgICAgICBzdGFydCA9IHRoaXMuc2VhcmNoX3Jlc3VsdFsiaGl0cy10b3RhbCJdIC0gdGhpcy5pdGVtc19wZXJfcGFnZSArIDE7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlUGFnaW5hdGlvbihzdGFydCwgb2Zmc2V0KTsKICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHRzKCk7CiAgICB9LAoKICAgIHNldHVwRmlsdGVycyhyZXN1bHRfZmlsdGVycykgewogICAgICAvLyBjb25zb2xlLmxvZygic2V0dXBGaWx0ZXJzOiAiLCByZXN1bHRfZmlsdGVycyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJrZXl3b3JkcyA6ICIsIHJlc3VsdF9maWx0ZXJzWyJrZXl3b3JkcyJdKTsKICAgICAgLy9jb25zb2xlLmxvZygiMSBmYWNldF9uYW1lcyIsIHRoaXMuZmFjZXRfbmFtZXMpOwogICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5mYWNldF9uYW1lcyk7IC8vIGNvbnNvbGUubG9nKCJrZXlzID0gIiwga2V5cyk7CgogICAgICBsZXQgZmlsdGVycyA9IFtdOyAvLyBjb25zb2xlLmxvZygiZmlsdGVycyAxIiwgdGhpcy5maWx0ZXJzKTsKCiAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJrZXkgPSAiLCBrZXkpOwogICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZmFjZXRfbmFtZXNba2V5XTsgLy8gY29uc29sZS5sb2coInZhbHVlIDogIiwgdmFsdWUpOwoKICAgICAgICBpZiAodmFsdWVbMV0gPT09ICJzaG93IikgewogICAgICAgICAgLy8gY29uc29sZS5sb2coInNob3cgIiwga2V5KTsKICAgICAgICAgIGlmIChyZXN1bHRfZmlsdGVyc1trZXldKSB7CiAgICAgICAgICAgIGZpbHRlcnMucHVzaCh7CiAgICAgICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICAgICAgdGl0bGU6IHZhbHVlWzBdLAogICAgICAgICAgICAgIG9wdGlvbnM6IHJlc3VsdF9maWx0ZXJzW2tleV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsgLy8gY29uc29sZS5sb2coIlNlYXJjaCBmaWx0ZXJzIDogIiwgZmlsdGVycyk7CgogICAgICByZXR1cm4gZmlsdGVyczsKICAgIH0sCgogICAgLy8gR2F0aGVyIHRoZSBwb3N0IGJvZHkgaW5mb3JtYXRpb24KICAgIHNldHVwUG9zdENvbnRlbnQoKSB7CiAgICAgIGxldCBwb3N0X2NvbnRlbnQgPSB7CiAgICAgICAgc2VhcmNoOiBbXQogICAgICB9OwogICAgICBwb3N0X2NvbnRlbnQubGltaXQgPSB0aGlzLml0ZW1zX3Blcl9wYWdlOwogICAgICBwb3N0X2NvbnRlbnQub2Zmc2V0ID0gdGhpcy5vZmZzZXQ7CiAgICAgIHBvc3RfY29udGVudC5zb3J0X3N0ciA9IHRoaXMuc29ydF9zdHI7IC8vY29uc29sZS5sb2coInhxdWlja19zZWFyY2hfc3RyaW5nID0gIiwgdGhpcy5xdWlja19zZWFyY2hfc3RyaW5nKTsKCiAgICAgIGlmICh0aGlzLnF1aWNrX3NlYXJjaF9zdHJpbmcubGVuZ3RoID4gMCkgewogICAgICAgIHBvc3RfY29udGVudC5zZWFyY2gucHVzaCh7CiAgICAgICAgICBncm91cDogImFuZCIsCiAgICAgICAgICBhbmQ6IFtdLAogICAgICAgICAgb3I6IFt7CiAgICAgICAgICAgIGZpZWxkOiAia2V5d29yZHMiLAogICAgICAgICAgICBzdHJpbmc6IHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZywKICAgICAgICAgICAgdHlwZTogInNpbXBsZSIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZmllbGQ6ICJhYnN0cmFjdF9kYXRhIiwKICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnF1aWNrX3NlYXJjaF9zdHJpbmcsCiAgICAgICAgICAgIHR5cGU6ICJzaW1wbGUiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGZpZWxkOiAidGl0bGUiLAogICAgICAgICAgICBzdHJpbmc6IHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZywKICAgICAgICAgICAgdHlwZTogInNpbXBsZSIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZmllbGQ6ICJsb2NhdG9yX2RhdGEiLAogICAgICAgICAgICBzdHJpbmc6IHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZywKICAgICAgICAgICAgdHlwZTogIm1hdGNoIgogICAgICAgICAgfSwgewogICAgICAgICAgICBmaWVsZDogImF1dGhvcnMuZmFtaWx5TmFtZSIsCiAgICAgICAgICAgIHN0cmluZzogdGhpcy5xdWlja19zZWFyY2hfc3RyaW5nLAogICAgICAgICAgICB0eXBlOiAic2ltcGxlIgogICAgICAgICAgfSwgewogICAgICAgICAgICBmaWVsZDogImF1dGhvcnMuZ2l2ZW5OYW1lIiwKICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnF1aWNrX3NlYXJjaF9zdHJpbmcsCiAgICAgICAgICAgIHR5cGU6ICJzaW1wbGUiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGZpZWxkOiAidGFyZ2V0X2F1ZGllbmNlIiwKICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnF1aWNrX3NlYXJjaF9zdHJpbmcsCiAgICAgICAgICAgIHR5cGU6ICJzaW1wbGUiCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGZpZWxkOiAiYXV0aG9yX29yZy5uYW1lIiwKICAgICAgICAgICAgc3RyaW5nOiB0aGlzLnF1aWNrX3NlYXJjaF9zdHJpbmcsCiAgICAgICAgICAgIHR5cGU6ICJzaW1wbGUiCiAgICAgICAgICB9XQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCJpbiBlbHNlISIpOwogICAgICAgIC8vIHNpbXBsZSBzZWFyY2gKICAgICAgICBwb3N0X2NvbnRlbnQuc2VhcmNoLnB1c2goewogICAgICAgICAgZ3JvdXA6ICJhbmQiLAogICAgICAgICAgYW5kOiBbXSwKICAgICAgICAgIG9yOiBbewogICAgICAgICAgICBmaWVsZDogImlkIiwKICAgICAgICAgICAgc3RyaW5nOiAiKiIsCiAgICAgICAgICAgIHR5cGU6ICJzaW1wbGUiCiAgICAgICAgICB9XQogICAgICAgIH0pOyAvLyBwb3N0X2NvbnRlbnQuc2VhcmNoLnB1c2goewogICAgICAgIC8vICAgICBncm91cDogImFuZCIsCiAgICAgICAgLy8gICAgIGFuZDogWwogICAgICAgIC8vICAgICAgICAgewogICAgICAgIC8vICAgICAgICAgICAgIGZpZWxkOiAia2V5d29yZHMiLAogICAgICAgIC8vICAgICAgICAgICAgIHN0cmluZzogIkFjY2VzcyByaWdodHMiLAogICAgICAgIC8vICAgICAgICAgICAgIHR5cGU6ICJtYXRjaCIsCiAgICAgICAgLy8gICAgICAgICB9LAogICAgICAgIC8vICAgICBdLAogICAgICAgIC8vIH0pOwogICAgICB9IC8vIEthcmwncyBvcmlnaW5hbCBzdGF0dXMgc2VjdGlvbgoKCiAgICAgIHBvc3RfY29udGVudC5zZWFyY2gucHVzaCh7CiAgICAgICAgZ3JvdXA6ICJhbmQiLAogICAgICAgIGFuZDogW3sKICAgICAgICAgIGZpZWxkOiAic3RhdHVzIiwKICAgICAgICAgIHN0cmluZzogInRydWUiLAogICAgICAgICAgdHlwZTogInNpbXBsZSIKICAgICAgICB9XQogICAgICB9KTsKICAgICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmZpbHRlcnNfc2VsZWN0ZWQpOyAvLyBjb25zb2xlLmxvZygia2V5cyA6ICIsIGtleXMpOwogICAgICAvLyBjb25zb2xlLmxvZygiZmlsdGVyc19zZWxlY3RlZDogIiwgdGhpcy5maWx0ZXJzX3NlbGVjdGVkKTsKICAgICAgLy8gY29uc29sZS5sb2coImxlbmd0aCA9ICIsIHRoaXMuZmlsdGVyc19zZWxlY3RlZC5sZW5ndGgpOwogICAgICAvLyBjb25zb2xlLmxvZygieWZpbHRlcnNfc2VsZWN0ZWQ6ICIsIHRoaXMuZmlsdGVyc19zZWxlY3RlZCk7CiAgICAgIC8vIE5vdyBhZGQgdGhlIGZhY2V0IHNlbGVjdGlvbnMKICAgICAgLy8gaWYgKHRoaXMuZmlsdGVyc19zZWxlY3RlZCkgewoKICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCkgewogICAgICAgIC8vIGxldCBxdWVyeV9hcnJheSA9IHsKICAgICAgICAvLyAgICAgZ3JvdXA6ICJhbmQiLAogICAgICAgIC8vICAgICBhbmQ6IHsKICAgICAgICAvLyAgICAgICAgIGZpZWxkOiB0aGlzLmZpbHRlcnNfc2VsZWN0ZWQua2V5LAogICAgICAgIC8vICAgICAgICAgc3RyaW5nOiB0aGlzLmZpbHRlcnNfc2VsZWN0ZWQudmFsdWUsCiAgICAgICAgLy8gICAgICAgICB0eXBlOiAibWF0Y2giLAogICAgICAgIC8vICAgICB9LAogICAgICAgIC8vIH07CiAgICAgICAgLy8gY29uc29sZS5sb2coInF1ZXJ5X2FycmF5IDI6ICIsIHF1ZXJ5X2FycmF5KTsKICAgICAgICAvLyBjb25zb2xlLmxvZygiZmlsdGVyc19zZWxlY3RlZCA6ICIsIHRoaXMuZmlsdGVyc19zZWxlY3RlZCk7CiAgICAgICAgbGV0IGZpbHRlcnMgPSBbXTsKICAgICAgICBsZXQgdmFsdWVzID0gW107CiAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygia2V5ID0gIiwga2V5KTsKICAgICAgICAgIHZhbHVlcyA9IHRoaXMuZmlsdGVyc19zZWxlY3RlZFtrZXldOyAvLyBjb25zb2xlLmxvZygidmFsdWVzIDogIiwgdmFsdWVzKTsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBmaWx0ZXJzLnB1c2goewogICAgICAgICAgICAgIGZpZWxkOiBrZXksCiAgICAgICAgICAgICAgc3RyaW5nOiB2YWx1ZXNbaV0sCiAgICAgICAgICAgICAgdHlwZTogIm1hdGNoIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coImZpbHRlcnMgOiAiLCBmaWx0ZXJzKTsKICAgICAgICAvLyBwb3N0X2NvbnRlbnQuc2VhcmNoLnB1c2goewogICAgICAgIC8vICAgICBncm91cDogImFuZCIsCiAgICAgICAgLy8gICAgIGFuZDogWwogICAgICAgIC8vICAgICAgICAgewogICAgICAgIC8vICAgICAgICAgICAgIGZpZWxkOiB0aGlzLmZpbHRlcnNfc2VsZWN0ZWRbMF0ua2V5LAogICAgICAgIC8vICAgICAgICAgICAgIHN0cmluZzogdGhpcy5maWx0ZXJzX3NlbGVjdGVkWzBdLnZhbHVlLAogICAgICAgIC8vICAgICAgICAgICAgIHR5cGU6ICJtYXRjaCIsCiAgICAgICAgLy8gICAgICAgICB9LAogICAgICAgIC8vICAgICBdLAogICAgICAgIC8vIH0pOwoKICAgICAgICBwb3N0X2NvbnRlbnQuc2VhcmNoLnB1c2goewogICAgICAgICAgZ3JvdXA6ICJhbmQiLAogICAgICAgICAgYW5kOiBmaWx0ZXJzCiAgICAgICAgfSk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coInBvc3RfY29udGVudCA9ICIsIHBvc3RfY29udGVudCk7CgoKICAgICAgcmV0dXJuIHBvc3RfY29udGVudDsKICAgIH0sCgogICAgdXBkYXRlUGFnaW5hdGlvbihzdGFydCwgb2Zmc2V0KSB7CiAgICAgIGlmIChzdGFydCA8PSAxKSB0aGlzLm5vX3ByZXYgPSB0cnVlO2Vsc2UgdGhpcy5ub19wcmV2ID0gZmFsc2U7CiAgICAgIGlmIChzdGFydCA+PSB0aGlzLnNlYXJjaF9yZXN1bHRbImhpdHMtdG90YWwiXSAtIHRoaXMuaXRlbXNfcGVyX3BhZ2UpIHRoaXMubm9fbmV4dCA9IHRydWU7ZWxzZSB0aGlzLm5vX25leHQgPSBmYWxzZTsKICAgICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgIHRoaXMuc3RhcnRfaW5kZXggPSBzdGFydDsKICAgIH0sCgogICAgdXBkYXRlUmVzdWx0cyhkYXRhKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJTZWFyY2gudXBkYXRlUmVzdWx0cygpIik7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJkYXRhID0gIiwgZGF0YSk7CiAgICAgIHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZyA9IGRhdGE7CiAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0cygpOwogICAgfQoKICB9LAoKICBiZWZvcmVNb3VudCgpIHsKICAgIC8vIGNvbnNvbGUubG9nKCJTZWFyY2guYmVmb3JlTW91bnQoKSIpOwogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXNbInNlYXJjaF9zdHJpbmciXSkgdGhpcy5xdWlja19zZWFyY2hfc3RyaW5nID0gdGhpcy4kcm91dGUucGFyYW1zLnNlYXJjaF9zdHJpbmc7IC8vIGNvbnNvbGUubG9nKCJxdWlja19zZWFyY2hfc3RyaW5nID0gIiwgdGhpcy5xdWlja19zZWFyY2hfc3RyaW5nKTsKICB9LAoKICAvLyBMaWZlY3ljbGUgZnVuY3Rpb25zLCBzZWUKICAvLyBodHRwczovL3YzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YW5jZS5odG1sI2xpZmVjeWNsZS1kaWFncmFtIGZvciBtb3JlIGluZm8KICBtb3VudGVkKCkgewogICAgLy8gY29uc29sZS5sb2coIlNlYXJjaC5tb3VudGVkIik7CiAgICAvLyBjb25zb2xlLmxvZygicXVpY2tfc2VhcmNoX3N0cmluZyA9ICIsIHRoaXMucXVpY2tfc2VhcmNoX3N0cmluZyk7CiAgICB0aGlzLmdldFNlYXJjaFJlc3VsdHMoKTsKICB9Cgp9Ow=="},{"version":3,"sources":["/Users/karl/Repos/dmtc-userinterface/ui/src/components/Search.vue"],"names":[],"mappings":"AAyEA,OAAO,UAAP,MAAuB,kBAAvB;AACA,OAAO,UAAP,MAAuB,kBAAvB;AACA,OAAO,SAAP,MAAsB,iBAAtB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,KAAK,EAAE,EAFM;AAIb,EAAA,UAAU,EAAE;AAAE,IAAA,UAAF;AAAc,IAAA,UAAd;AAA0B,IAAA;AAA1B,GAJC;;AAMb,EAAA,IAAI,GAAG;AACL,WAAO;AACL,MAAA,KAAK,EAAE,KADF;AAEL,MAAA,YAAY,EAAE,CAFT;AAGL,MAAA,WAAW,EAAE;AACX,QAAA,QAAQ,EAAE,CAAC,UAAD,EAAa,MAAb,CADC;AAEX,2BAAmB,CAAC,wBAAD,EAA2B,MAA3B,CAFR;AAE4C;AACvD,QAAA,YAAY,EAAE,CAAC,2BAAD,EAA8B,MAA9B,CAHH;AAG0C;AACrD,QAAA,gBAAgB,EAAE,CAAC,oBAAD,EAAuB,MAAvB,CAJP;AAKX,QAAA,mBAAmB,EAAE,CAAC,sBAAD,EAAyB,MAAzB,CALV;AAMX,QAAA,eAAe,EAAE,CAAC,kBAAD,EAAqB,MAArB,CANN;AAOX,QAAA,WAAW,EAAE,CAAC,aAAD,EAAgB,MAAhB,CAPF;AAQX,QAAA,OAAO,EAAE,CAAC,SAAD,EAAY,MAAZ,CARE;AASX,uCAA+B,CAAC,wBAAD,EAA2B,MAA3B,CATpB;AAUX,QAAA,OAAO,EAAE,CAAC,oBAAD,EAAuB,MAAvB,CAVE;AAWX,QAAA,UAAU,EAAE,CAAC,YAAD,EAAe,MAAf,CAXD;AAYX,QAAA,OAAO,EAAE,CAAC,wBAAD,EAA2B,MAA3B,CAZE;AAaX,QAAA,OAAO,EAAE,CAAC,qBAAD,EAAwB,MAAxB,CAbE;AAcX,8BAAsB,CAAC,wBAAD,EAA2B,MAA3B,CAdX,CAc+C;;AAd/C,OAHR;AAmBL,MAAA,OAAO,EAAE,EAnBJ;AAoBL,MAAA,gBAAgB,EAAE,EApBb;AAqBL,MAAA,cAAc,EAAE,EArBX;AAsBL,MAAA,OAAO,EAAE,KAtBJ;AAuBL,MAAA,OAAO,EAAE,IAvBJ;AAwBL,MAAA,SAAS,EAAE,CAxBN;AAyBL,MAAA,MAAM,EAAE,CAzBH;AA0BL,MAAA,mBAAmB,EAAE,EA1BhB;AA2BL,MAAA,aAAa,EAAE,EA3BV;AA4BL,MAAA,QAAQ,EAAE,YA5BL;AA6BL,MAAA,WAAW,EAAE,CA7BR;AA8BL,MAAA,OAAO,EAAE;AA9BJ,KAAP;AAgCD,GAvCY;;AAyCb,EAAA,OAAO,EAAE;AACP,IAAA,kBAAkB,GAAG;AACnB;AACA;AACA;AACA,WAAK,cAAL,GAAsB,QAAQ,CAAC,KAAK,cAAN,CAA9B,CAJmB,CAKnB;;AACA,WAAK,gBAAL;AACD,KARM;;AAUP,IAAA,OAAO,GAAG;AACR,WAAK,mBAAL,GAA2B,EAA3B;AACA,WAAK,gBAAL,GAAwB,EAAxB;AACA,WAAK,gBAAL;AACD,KAdM;;AAgBP,IAAA,aAAa,CAAC,IAAD,EAAO;AAClB;AACA;AACA;AACA;AACA,UAAI,IAAJ,EAAU;AACR;AACA;AACA,aAAK,gBAAL,CAAsB,IAAI,CAAC,GAA3B,IAAkC,IAAI,CAAC,gBAAvC,CAHQ,CAIR;AACF;;AAEA,WAAK,gBAAL,CAAsB,CAAtB,EAAyB,CAAzB;AACA,WAAK,gBAAL;AACD,KA9BM;;AAgCP,IAAA,gBAAgB,GAAG;AACjB;AACA;AAEA,WAAK,KAAL,GAAa,KAAb;AACA,UAAI,IAAG,GAAI,KAAK,gBAAL,EAAX;AACA,WAAK,cAAL,GAAsB,IAAtB;AACA,WAAK,cAAL,CAAoB,OAApB,CAA4B,IAA5B,EAPiB,CAQjB;AACA;AACA;;AAEA,MAAA,KAAK,CAAC,+CAAD,EAAkD;AACrD,QAAA,MAAM,EAAE,MAD6C;AAErD,QAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAF4C;AAKrD,QAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe,IAAf;AAL+C,OAAlD,CAAL,CAOG,IAPH,CAOS,QAAD,IAAc;AAClB,YAAI,QAAQ,CAAC,EAAb,EAAiB;AACf;AACA;AACA,iBAAO,QAAQ,CAAC,IAAT,EAAP;AACF,SAJA,MAIO;AACL,gBAAM,IAAI,KAAJ,EAAN;AACF;AACD,OAfH,EAgBG,IAhBH,CAgBS,MAAD,IAAY;AAChB,aAAK,SAAL,GAAiB,KAAjB,CADgB,CAEhB;;AACA,aAAK,aAAL,GAAqB,MAArB;AACA,aAAK,OAAL,GAAe,KAAK,YAAL,CAAkB,MAAM,CAAC,MAAzB,CAAf,CAJgB,CAKhB;AACD,OAtBH,EAuBG,KAvBH,CAuBS,MAAM;AACX,aAAK,KAAL,GAAa,IAAb;AACD,OAzBH;AA0BD,KAtEM;;AAwEP,IAAA,QAAQ,CAAC,IAAD,EAAO;AACb;AACA;AACA;AACA;AACA,UAAI,MAAK,GAAI,CAAb;AAAA,UACE,KAAI,GAAI,CADV;;AAGA,UAAI,IAAG,IAAK,OAAZ,EAAqB;AACnB,QAAA,MAAK,GAAI,CAAT;AACA,QAAA,KAAI,GAAI,CAAR;AACF,OAHA,MAGO,IAAI,IAAG,IAAK,MAAZ,EAAoB;AACzB,QAAA,MAAK,GAAI,KAAK,MAAL,GAAc,KAAK,cAA5B;AACA,QAAA,KAAI,GAAI,KAAK,WAAL,GAAmB,KAAK,cAAhC;AACF,OAHO,MAGA,IAAI,IAAG,IAAK,MAAZ,EAAoB;AACzB,QAAA,MAAK,GAAI,KAAK,MAAL,GAAc,KAAK,cAA5B;AACA,QAAA,KAAI,GAAI,KAAK,WAAL,GAAmB,KAAK,cAAhC;AACF,OAHO,MAGA,IAAI,IAAG,IAAK,MAAZ,EAAoB;AACzB,QAAA,MAAK,GAAI,KAAK,aAAL,CAAmB,YAAnB,IAAmC,KAAK,cAAjD;AACA,QAAA,KAAI,GAAI,KAAK,aAAL,CAAmB,YAAnB,IAAmC,KAAK,cAAxC,GAAyD,CAAjE;AACF;;AAEA,WAAK,gBAAL,CAAsB,KAAtB,EAA6B,MAA7B;AACA,WAAK,gBAAL;AACD,KAhGM;;AAkGP,IAAA,YAAY,CAAC,cAAD,EAAiB;AAC3B;AACA;AACA;AACA,YAAM,IAAG,GAAI,MAAM,CAAC,IAAP,CAAY,KAAK,WAAjB,CAAb,CAJ2B,CAK3B;;AACA,UAAI,OAAM,GAAI,EAAd,CAN2B,CAO3B;;AACA,MAAA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;AACpB;AACA,YAAI,KAAI,GAAI,KAAK,WAAL,CAAiB,GAAjB,CAAZ,CAFoB,CAGpB;;AACA,YAAI,KAAK,CAAC,CAAD,CAAL,KAAa,MAAjB,EAAyB;AACvB;AACA,cAAI,cAAc,CAAC,GAAD,CAAlB,EAAyB;AACvB,YAAA,OAAO,CAAC,IAAR,CAAa;AACX,cAAA,GAAG,EAAE,GADM;AAEX,cAAA,KAAK,EAAE,KAAK,CAAC,CAAD,CAFD;AAGX,cAAA,OAAO,EAAE,cAAc,CAAC,GAAD;AAHZ,aAAb;AAKF;AACF;AACD,OAdD,EAR2B,CAuB3B;;AACA,aAAO,OAAP;AACD,KA3HM;;AA6HP;AACA,IAAA,gBAAgB,GAAG;AACjB,UAAI,YAAW,GAAI;AAAE,QAAA,MAAM,EAAE;AAAV,OAAnB;AACA,MAAA,YAAY,CAAC,KAAb,GAAqB,KAAK,cAA1B;AACA,MAAA,YAAY,CAAC,MAAb,GAAsB,KAAK,MAA3B;AACA,MAAA,YAAY,CAAC,QAAb,GAAwB,KAAK,QAA7B,CAJiB,CAKjB;;AAEA,UAAI,KAAK,mBAAL,CAAyB,MAAzB,GAAkC,CAAtC,EAAyC;AACvC,QAAA,YAAY,CAAC,MAAb,CAAoB,IAApB,CAAyB;AACvB,UAAA,KAAK,EAAE,KADgB;AAEvB,UAAA,GAAG,EAAE,EAFkB;AAGvB,UAAA,EAAE,EAAE,CACF;AACE,YAAA,KAAK,EAAE,UADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WADE,EAMF;AACE,YAAA,KAAK,EAAE,eADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WANE,EAWF;AACE,YAAA,KAAK,EAAE,OADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WAXE,EAgBF;AACE,YAAA,KAAK,EAAE,cADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WAhBE,EAqBF;AACE,YAAA,KAAK,EAAE,oBADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WArBE,EA0BF;AACE,YAAA,KAAK,EAAE,mBADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WA1BE,EA+BF;AACE,YAAA,KAAK,EAAE,iBADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WA/BE,EAoCF;AACE,YAAA,KAAK,EAAE,iBADT;AAEE,YAAA,MAAM,EAAE,KAAK,mBAFf;AAGE,YAAA,IAAI,EAAE;AAHR,WApCE;AAHmB,SAAzB;AA8CF,OA/CA,MA+CO;AACL;AACA;AACA,QAAA,YAAY,CAAC,MAAb,CAAoB,IAApB,CAAyB;AACvB,UAAA,KAAK,EAAE,KADgB;AAEvB,UAAA,GAAG,EAAE,EAFkB;AAGvB,UAAA,EAAE,EAAE,CAAC;AAAE,YAAA,KAAK,EAAE,IAAT;AAAe,YAAA,MAAM,EAAE,GAAvB;AAA4B,YAAA,IAAI,EAAE;AAAlC,WAAD;AAHmB,SAAzB,EAHK,CAQL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF,OAxEiB,CA0EjB;;;AACA,MAAA,YAAY,CAAC,MAAb,CAAoB,IAApB,CAAyB;AACvB,QAAA,KAAK,EAAE,KADgB;AAEvB,QAAA,GAAG,EAAE,CACH;AACE,UAAA,KAAK,EAAE,QADT;AAEE,UAAA,MAAM,EAAE,MAFV;AAGE,UAAA,IAAI,EAAE;AAHR,SADG;AAFkB,OAAzB;AAWA,UAAI,IAAG,GAAI,MAAM,CAAC,IAAP,CAAY,KAAK,gBAAjB,CAAX,CAtFiB,CAuFjB;AACA;AACA;AACA;AACA;AACA;;AACA,UAAI,IAAI,CAAC,MAAL,GAAc,CAAlB,EAAqB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,YAAI,OAAM,GAAI,EAAd;AACA,YAAI,MAAK,GAAI,EAAb;AAEA,QAAA,IAAI,CAAC,OAAL,CAAc,GAAD,IAAS;AACpB;AACA,UAAA,MAAK,GAAI,KAAK,gBAAL,CAAsB,GAAtB,CAAT,CAFoB,CAGpB;;AACA,eAAK,IAAI,CAAA,GAAI,CAAb,EAAgB,CAAA,GAAI,MAAM,CAAC,MAA3B,EAAmC,CAAC,EAApC,EAAwC;AACtC,YAAA,OAAO,CAAC,IAAR,CAAa;AACX,cAAA,KAAK,EAAE,GADI;AAEX,cAAA,MAAM,EAAE,MAAM,CAAC,CAAD,CAFH;AAGX,cAAA,IAAI,EAAE;AAHK,aAAb;AAKF;AACD,SAXD,EAfmB,CA4BnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAA,YAAY,CAAC,MAAb,CAAoB,IAApB,CAAyB;AACvB,UAAA,KAAK,EAAE,KADgB;AAEvB,UAAA,GAAG,EAAE;AAFkB,SAAzB;AAIF,OA1IiB,CA4IjB;;;AAEA,aAAO,YAAP;AACD,KA7QM;;AA+QP,IAAA,gBAAgB,CAAC,KAAD,EAAQ,MAAR,EAAgB;AAC9B,UAAI,KAAI,IAAK,CAAb,EAAgB,KAAK,OAAL,GAAe,IAAf,CAAhB,KACK,KAAK,OAAL,GAAe,KAAf;AAEL,UAAI,KAAI,IAAK,KAAK,aAAL,CAAmB,YAAnB,IAAmC,KAAK,cAArD,EACE,KAAK,OAAL,GAAe,IAAf,CADF,KAEK,KAAK,OAAL,GAAe,KAAf;AAEL,WAAK,MAAL,GAAc,MAAd;AACA,WAAK,WAAL,GAAmB,KAAnB;AACD,KAzRM;;AA2RP,IAAA,aAAa,CAAC,IAAD,EAAO;AAClB;AACA;AACA,WAAK,mBAAL,GAA2B,IAA3B;AACA,WAAK,gBAAL;AACD;;AAhSM,GAzCI;;AA4Ub,EAAA,WAAW,GAAG;AACZ;AACA,QAAI,KAAK,MAAL,CAAY,MAAZ,IAAsB,KAAK,MAAL,CAAY,MAAZ,CAAmB,eAAnB,CAA1B,EACE,KAAK,mBAAL,GAA2B,KAAK,MAAL,CAAY,MAAZ,CAAmB,aAA9C,CAHU,CAIZ;AACD,GAjVY;;AAmVb;AACA;AACA,EAAA,OAAO,GAAG;AACR;AACA;AACA,SAAK,gBAAL;AACD;;AAzVY,CAAf","sourcesContent":["<template>\n  <div>\n    <SearchBar\n      :value_in=\"quick_search_string\"\n      @value_out=\"updateResults\"\n    ></SearchBar>\n\n    <div v-if=\"error\" class=\"error\">Sorry, unable to query server!</div>\n    <div v-else>\n      <!-- <div\n            v-for=\"filter in filters_selected\"\n            :key=\"filter\"\n            class=\"filters-selected-container\"\n        >\n            <div v-for=\"selected in filter\" :key=\"selected\">\n                {{ selected }} &nbsp; X\n            </div>\n        </div> -->\n      <div class=\"filter-search-container\">\n        <div class=\"filters-container\">\n          <div class=\"label\">Filters</div>\n          <hr />\n          <div v-for=\"filter in filters\" :key=\"filter\">\n            <FilterItem\n              :filter=\"filter\"\n              :selected_in=\"filters_selected[filter.key]\"\n              @selected_out=\"filterUpdated\"\n            ></FilterItem>\n          </div>\n        </div>\n        <div class=\"results-container\">\n          <div class=\"results-header\">\n            <div>\n              <span class=\"label\">Search Results:</span>\n              <span>{{ search_result[\"hits-total\"] }}</span>\n            </div>\n            <div class=\"pagination\">\n              <button @click=\"gotoPage('first')\" :disabled=\"no_prev\">\n                &lt;&lt;\n              </button>\n              <button @click=\"gotoPage('prev')\" :disabled=\"no_prev\">\n                &lt;\n              </button>\n              <button @click=\"gotoPage('next')\" :disabled=\"no_next\">\n                &gt;\n              </button>\n              <button @click=\"gotoPage('last')\" :disabled=\"no_next\">\n                &gt;&gt;\n              </button>\n            </div>\n            <div>\n              <b>Items per page: </b>\n              <span id=\"v-model-select\">\n                <select v-model=\"items_per_page\" @change=\"changeItemsPerPage\">\n                  <option>10</option>\n                  <option>20</option>\n                  <option>30</option>\n                </select>\n              </span>\n            </div>\n          </div>\n          <div class=\"sortby\"><b>Sort By:</b> Latest First</div>\n          <hr />\n          <div v-for=\"(item, index) in search_result.results\" :key=\"item\">\n            <ResultItem :index=\"start_index + index\" :item=\"item\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FilterItem from \"./FilterItem.vue\";\nimport ResultItem from \"./ResultItem.vue\";\nimport SearchBar from \"./SearchBar.vue\";\n\nexport default {\n  name: \"Search\",\n  error: \"\",\n\n  components: { FilterItem, ResultItem, SearchBar },\n\n  data() {\n    return {\n      error: false,\n      current_page: 1,\n      facet_names: {\n        keywords: [\"Keywords\", \"show\"],\n        \"author_org.name\": [\"Author Organization(s)\", \"show\"], // has bug showing incorrect values corresponding with org name\n        author_names: [\"Authoring Person(s) Names\", \"show\"], // question of whether this should be hidden\n        language_primary: [\"Original Languages\", \"show\"],\n        languages_secondary: [\"Additional Languages\", \"show\"],\n        target_audience: [\"Target Audiences\", \"show\"],\n        access_cost: [\"Access Cost\", \"show\"],\n        license: [\"License\", \"show\"],\n        \"accessibility_features.name\": [\"Accessibility Features\", \"show\"],\n        subject: [\"Subject Discipline\", \"show\"],\n        media_type: [\"Media Type\", \"show\"],\n        lr_type: [\"Learning Resource Type\", \"show\"],\n        purpose: [\"Educational Purpose\", \"show\"],\n        \"ed_frameworks.name\": [\"Educational Frameworks\", \"show\"], // uncomment this line when ed_frameworks key issue is resolved in API\n      },\n      filters: [],\n      filters_selected: {},\n      items_per_page: 10,\n      no_next: false,\n      no_prev: true,\n      num_pages: 0,\n      offset: 0,\n      quick_search_string: \"\",\n      search_result: [],\n      sort_str: \"score desc\",\n      start_index: 1,\n      is_full: false,\n    };\n  },\n\n  methods: {\n    changeItemsPerPage() {\n      // console.log(\"changeItemsPerPage: \", this.items_per_page);\n      // items_per_page becomes a string after user change the value so\n      // need to force it back to int here\n      this.items_per_page = parseInt(this.items_per_page);\n      // console.log(\"items_per_page 2 = \", this.items_per_page);\n      this.getSearchResults();\n    },\n\n    doClear() {\n      this.quick_search_string = \"\";\n      this.filters_selected = {};\n      this.getSearchResults();\n    },\n\n    filterUpdated(data) {\n      // console.log(\"filterUpdated!\", data);\n      // console.log(\"data key = \", data.key);\n      // console.log(\"data options = \", data.selected_options);\n      // this.filters_selected = {};\n      if (data) {\n        // console.log(\"data : \", data);\n        // console.log(\"filters_selected 1 : \", this.filters_selected);\n        this.filters_selected[data.key] = data.selected_options;\n        // console.log(\"filters_selected 2 : \", this.filters_selected);\n      }\n\n      this.updatePagination(1, 0);\n      this.getSearchResults();\n    },\n\n    getSearchResults() {\n      //console.log(\"entered getSearchResults()\");\n      // console.log(\"quick_search_string = \", this.quick_search_string);\n\n      this.error = false;\n      let body = this.setupPostContent();\n      this.$currentSearch = body;\n      this.$searchHistory.unshift(body);\n      //console.log(\"body: \", body);\n      //console.log(\"currentSearch: \", this.$currentSearch);\n      //console.log(\"searchHistory: \", this.$searchHistory);\n\n      fetch(\"https://esip-dev-02.edacnm.org/api/resources/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body),\n      })\n        .then((response) => {\n          if (response.ok) {\n            // DO NOT do anything to the response, including console.log\n            // or else it will cause an error that response is \"disturbed\"\n            return response.json();\n          } else {\n            throw new Error();\n          }\n        })\n        .then((result) => {\n          this.isLoading = false;\n          // console.log(\"result :\", result);\n          this.search_result = result;\n          this.filters = this.setupFilters(result.facets);\n          // console.log(\"search_result :\", this.search_result);\n        })\n        .catch(() => {\n          this.error = true;\n        });\n    },\n\n    gotoPage(page) {\n      // console.log(\"page = \", page);\n      // console.log(\"hits total = \", this.search_result[\"hits-total\"]);\n      // console.log(\"offset = \", this.offset);\n      // console.log(\"items_per_page = \", parseInt(this.items_per_page));\n      let offset = 0,\n        start = 1;\n\n      if (page == \"first\") {\n        offset = 0;\n        start = 1;\n      } else if (page == \"next\") {\n        offset = this.offset + this.items_per_page;\n        start = this.start_index + this.items_per_page;\n      } else if (page == \"prev\") {\n        offset = this.offset - this.items_per_page;\n        start = this.start_index - this.items_per_page;\n      } else if (page == \"last\") {\n        offset = this.search_result[\"hits-total\"] - this.items_per_page;\n        start = this.search_result[\"hits-total\"] - this.items_per_page + 1;\n      }\n\n      this.updatePagination(start, offset);\n      this.getSearchResults();\n    },\n\n    setupFilters(result_filters) {\n      // console.log(\"setupFilters: \", result_filters);\n      // console.log(\"keywords : \", result_filters[\"keywords\"]);\n      //console.log(\"1 facet_names\", this.facet_names);\n      const keys = Object.keys(this.facet_names);\n      // console.log(\"keys = \", keys);\n      let filters = [];\n      // console.log(\"filters 1\", this.filters);\n      keys.forEach((key) => {\n        // console.log(\"key = \", key);\n        let value = this.facet_names[key];\n        // console.log(\"value : \", value);\n        if (value[1] === \"show\") {\n          // console.log(\"show \", key);\n          if (result_filters[key]) {\n            filters.push({\n              key: key,\n              title: value[0],\n              options: result_filters[key],\n            });\n          }\n        }\n      });\n      // console.log(\"Search filters : \", filters);\n      return filters;\n    },\n\n    // Gather the post body information\n    setupPostContent() {\n      let post_content = { search: [] };\n      post_content.limit = this.items_per_page;\n      post_content.offset = this.offset;\n      post_content.sort_str = this.sort_str;\n      //console.log(\"xquick_search_string = \", this.quick_search_string);\n\n      if (this.quick_search_string.length > 0) {\n        post_content.search.push({\n          group: \"and\",\n          and: [],\n          or: [\n            {\n              field: \"keywords\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"abstract_data\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"title\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"locator_data\",\n              string: this.quick_search_string,\n              type: \"match\",\n            },\n            {\n              field: \"authors.familyName\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"authors.givenName\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"target_audience\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n            {\n              field: \"author_org.name\",\n              string: this.quick_search_string,\n              type: \"simple\",\n            },\n          ],\n        });\n      } else {\n        // console.log(\"in else!\");\n        // simple search\n        post_content.search.push({\n          group: \"and\",\n          and: [],\n          or: [{ field: \"id\", string: \"*\", type: \"simple\" }],\n        });\n        // post_content.search.push({\n        //     group: \"and\",\n        //     and: [\n        //         {\n        //             field: \"keywords\",\n        //             string: \"Access rights\",\n        //             type: \"match\",\n        //         },\n        //     ],\n        // });\n      }\n\n      // Karl's original status section\n      post_content.search.push({\n        group: \"and\",\n        and: [\n          {\n            field: \"status\",\n            string: \"true\",\n            type: \"simple\",\n          },\n        ],\n      });\n\n      let keys = Object.keys(this.filters_selected);\n      // console.log(\"keys : \", keys);\n      // console.log(\"filters_selected: \", this.filters_selected);\n      // console.log(\"length = \", this.filters_selected.length);\n      // console.log(\"yfilters_selected: \", this.filters_selected);\n      // Now add the facet selections\n      // if (this.filters_selected) {\n      if (keys.length > 0) {\n        // let query_array = {\n        //     group: \"and\",\n        //     and: {\n        //         field: this.filters_selected.key,\n        //         string: this.filters_selected.value,\n        //         type: \"match\",\n        //     },\n        // };\n        // console.log(\"query_array 2: \", query_array);\n        // console.log(\"filters_selected : \", this.filters_selected);\n\n        let filters = [];\n        let values = [];\n\n        keys.forEach((key) => {\n          // console.log(\"key = \", key);\n          values = this.filters_selected[key];\n          // console.log(\"values : \", values);\n          for (let i = 0; i < values.length; i++) {\n            filters.push({\n              field: key,\n              string: values[i],\n              type: \"match\",\n            });\n          }\n        });\n\n        // console.log(\"filters : \", filters);\n\n        // post_content.search.push({\n        //     group: \"and\",\n        //     and: [\n        //         {\n        //             field: this.filters_selected[0].key,\n        //             string: this.filters_selected[0].value,\n        //             type: \"match\",\n        //         },\n        //     ],\n        // });\n\n        post_content.search.push({\n          group: \"and\",\n          and: filters,\n        });\n      }\n\n      // console.log(\"post_content = \", post_content);\n\n      return post_content;\n    },\n\n    updatePagination(start, offset) {\n      if (start <= 1) this.no_prev = true;\n      else this.no_prev = false;\n\n      if (start >= this.search_result[\"hits-total\"] - this.items_per_page)\n        this.no_next = true;\n      else this.no_next = false;\n\n      this.offset = offset;\n      this.start_index = start;\n    },\n\n    updateResults(data) {\n      // console.log(\"Search.updateResults()\");\n      // console.log(\"data = \", data);\n      this.quick_search_string = data;\n      this.getSearchResults();\n    },\n  },\n\n  beforeMount() {\n    // console.log(\"Search.beforeMount()\");\n    if (this.$route.params && this.$route.params[\"search_string\"])\n      this.quick_search_string = this.$route.params.search_string;\n    // console.log(\"quick_search_string = \", this.quick_search_string);\n  },\n\n  // Lifecycle functions, see\n  // https://v3.vuejs.org/guide/instance.html#lifecycle-diagram for more info\n  mounted() {\n    // console.log(\"Search.mounted\");\n    // console.log(\"quick_search_string = \", this.quick_search_string);\n    this.getSearchResults();\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.error {\n  font-weight: bold;\n  text-align: center;\n}\n\n.filter-search-container {\n  display: flex;\n  justify-content: center;\n  margin: auto;\n  width: 85%;\n}\n\n.filters-container {\n  padding-right: 1em;\n  width: 25%;\n}\n\n.filters-selected-container {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  margin: auto;\n  width: 85%;\n}\n\n.label {\n  font-size: larger;\n  font-weight: bold;\n  padding: 0px 0.5em;\n}\n\n.pagination {\n  flex-grow: 8;\n}\n\n.results-container {\n  width: 70%;\n}\n\n.results-header {\n  display: flex;\n  text-align: center;\n}\n\n.search-container {\n  display: flex;\n  width: 90%;\n}\n\n.sortby {\n  font-size: smaller;\n  padding-left: 1em;\n}\n</style>\n"],"sourceRoot":""}]}